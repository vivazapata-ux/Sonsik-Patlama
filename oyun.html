<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Şonşik Patlatma</title>
    <style>
        body { margin: 0; overflow: hidden; background-color: #87CEEB; font-family: Arial, sans-serif; }
        #ui { position: absolute; top: 20px; left: 20px; color: white; font-size: 24px; font-weight: bold; text-shadow: 2px 2px 0 #000; pointer-events: none; }
        #instruction { position: absolute; bottom: 20px; width: 100%; text-align: center; color: white; font-size: 18px; text-shadow: 1px 1px 0 #000; pointer-events: none; }
    </style>
</head>
<body>
    <div id="ui">Şişirme Seviyesi: <span id="counter">0</span>/10</div>
    <div id="instruction">Pompaya Tıkla ve Şonşik'i Şişir!</div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <script>
        // --- AYARLAR ---
        let clickCount = 0;
        const maxClicks = 10;
        let isExploded = false;
        
        // --- SES DOSYALARI ---
        // ses1.m4a: "Her şey evlatlarım için"
        // ses2.m4a: "Şonşik... Şonşiğim..."
        const pumpSound = new Audio('ses1.m4a'); 
        const finalSound = new Audio('ses2.m4a');
        
        pumpSound.volume = 1.0;
        finalSound.volume = 1.0;

        // Sahne Kurulumu
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x333333);

        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 6; 
        camera.position.y = 0;

        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // Işıklandırma
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.8);
        scene.add(ambientLight);
        const dirLight = new THREE.DirectionalLight(0xffffff, 0.8);
        dirLight.position.set(5, 5, 5);
        scene.add(dirLight);

        // --- MATERYAL & KARAKTER ---
        const textureLoader = new THREE.TextureLoader();
        let mayoTexture;

        // KÜRE GEOMETRİSİ (Yuvarlak Şonşik)
        const geometry = new THREE.SphereGeometry(2, 32, 32); 
        const material = new THREE.MeshStandardMaterial({ color: 0xaaaaaa });
        const soncik = new THREE.Mesh(geometry, material);
        scene.add(soncik);

        // Fotoğrafı yükle
        textureLoader.load('soncik.jpg', (texture) => {
            soncik.material = new THREE.MeshStandardMaterial({ map: texture });
        });

        // Mayonez
        textureLoader.load('mayonez.png', (texture) => {
            mayoTexture = texture;
        });

        // --- POMPA ---
        const pumpGroup = new THREE.Group();
        
        const pumpBase = new THREE.Mesh(
            new THREE.CylinderGeometry(0.6, 0.8, 0.3, 32),
            new THREE.MeshStandardMaterial({ color: 0x333333 })
        );
        pumpBase.position.y = -2;
        pumpGroup.add(pumpBase);

        const pumpBody = new THREE.Mesh(
            new THREE.CylinderGeometry(0.2, 0.2, 2.5, 16),
            new THREE.MeshStandardMaterial({ color: 0x888888 })
        );
        pumpBody.position.y = -0.8;
        pumpGroup.add(pumpBody);

        const pumpHandle = new THREE.Mesh(
            new THREE.BoxGeometry(1.5, 0.2, 0.5),
            new THREE.MeshStandardMaterial({ color: 0xff0000 })
        );
        pumpHandle.position.y = 0.5;
        pumpHandle.name = "pompa";
        pumpGroup.add(pumpHandle);

        pumpGroup.position.set(3.5, -1, 0); 
        scene.add(pumpGroup);

        // Hortum
        const hoseCurve = new THREE.CatmullRomCurve3([
            new THREE.Vector3(3.3, -1.8, 0),
            new THREE.Vector3(2.5, -2, 0),
            new THREE.Vector3(0, -2, 0) 
        ]);
        const hose = new THREE.Mesh(
            new THREE.TubeGeometry(hoseCurve, 20, 0.08, 8, false),
            new THREE.MeshStandardMaterial({ color: 0x111111 })
        );
        scene.add(hose);

        // --- PATLAMA EFEKTİ ---
        const mayoJars = [];
        function createExplosion() {
            const jarGeo = new THREE.CylinderGeometry(0.2, 0.2, 0.4, 12